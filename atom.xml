<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Ensar Hamzaçebi]]></title>
  <link href="http://ensr.github.io/atom.xml" rel="self"/>
  <link href="http://ensr.github.io/"/>
  <updated>2016-05-11T17:31:28+03:00</updated>
  <id>http://ensr.github.io/</id>
  <author>
    <name><![CDATA[Ensar Hamzaçebi]]></name>
    <email><![CDATA[hamzacebi.ensar@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Android Face Detection 01 - Başlangıç]]></title>
    <link href="http://ensr.github.io/blog/2016/02/18/android-face-detection-01/"/>
    <updated>2016-02-18T15:45:52+02:00</updated>
    <id>http://ensr.github.io/blog/2016/02/18/android-face-detection-01</id>
    <content type="html"><![CDATA[<p><img class="center" src="http://ensr.github.io/images/face_detect.png"></p>

<p>Android'de face detection işlemini gerçekleştirmek için Google Play Service'i kullanabiliriz.Bunun için yapmamız gereken ilk şey google play service'in gradle dependences'ini projemize eklemek olacaktır.</p>

<p>Android Studio'da oluşturduğumuz projemizin /app dizini altındaki build.gradle dosyasını açarak dependencies kısmına aşşağıdaki satırı ekliyoruz ve Sync ediyoruz.</p>

<!-- more -->




<figure class='code'><figcaption><span>build.gradle</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>compile &#39;com.google.android.gms:play-services:7.8.0&#39;
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Bir sonraki adımımız AndroidManifest.xml dosyasına aşağıda verdiğimiz meta-data'yı application tag'inin içerisine eklemek.</p>

<figure class='code'><figcaption><span>AndroidManifest.xml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;meta-data</span> <span class="na">android:name=</span><span class="s">&quot;com.google.android.gms.vision.DEPENDENCIES&quot;</span> <span class="na">android:value=</span><span class="s">&quot;face&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Daha sonra yüz tesbiti yapacağımız resimi /res/raw dizinine koyuyoruz. MainActivity.java'yı (Main activity) açarak aşağıdaki kodu onCreate'in içerisine yazıyoruz.</p>

<figure class='code'><figcaption><span>MainActivity.java</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Override</span>
</span><span class='line'><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
</span><span class='line'>    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Resimi bitmap formatına döndürüyoruz.</span>
</span><span class='line'>    <span class="n">InputStream</span> <span class="n">stream</span> <span class="o">=</span> <span class="n">getResources</span><span class="o">().</span><span class="na">openRawResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">raw</span><span class="o">.</span><span class="na">image01</span><span class="o">);</span>
</span><span class='line'>    <span class="n">Bitmap</span> <span class="n">bitmap</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeStream</span><span class="o">(</span><span class="n">stream</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Face Detector&#39;ü burada oluşturuyoruz.</span>
</span><span class='line'>    <span class="n">FaceDetector</span> <span class="n">detector</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FaceDetector</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">())</span>
</span><span class='line'>            <span class="o">.</span><span class="na">setTrackingEnabled</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
</span><span class='line'>            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Bitmap&#39;imiz üzerinde face detection&#39;un çalışması için bir frame oluşturuyoruz.</span>
</span><span class='line'>    <span class="n">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Frame</span><span class="o">.</span><span class="na">Builder</span><span class="o">().</span><span class="na">setBitmap</span><span class="o">(</span><span class="n">bitmap</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Face detector&#39;ü çalıştırarak resimde belirlenen yüzleri SparseArray&#39;e listeliyoruz.</span>
</span><span class='line'>    <span class="n">SparseArray</span><span class="o">&lt;</span><span class="n">Face</span><span class="o">&gt;</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="na">detect</span><span class="o">(</span><span class="n">frame</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//Ekrana resimde kaç yüz tespit edildiğini gösteriyoruz.</span>
</span><span class='line'>    <span class="n">TextView</span> <span class="n">faceCountView</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">face_count</span><span class="o">);</span>
</span><span class='line'>    <span class="n">faceCountView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">faces</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; faces detected&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//face detection&#39;u sonlandırıyoruz.</span>
</span><span class='line'>    <span class="n">detector</span><span class="o">.</span><span class="na">release</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Evet arkadaşlar, bu şekilde bir resimde yüz olup olmadığını varsa kaç tane olduklarını tespit edebilirsiniz. Şunu da söylemem gerek google'ın bu servisi sadece yüz tespit etmeye yarar, yüz tanıma gibi bir özelliği bulunmamaktadır.</p>

<p>Umarım yardımcı olabilmişimdir. İyi çalışmalar.</p>
]]></content>
  </entry>
  
</feed>
